class Endereco < ActiveRecord::Base
	validates_presence_of :cep, :enderecavel_id, :enderecavel_type
	before_save :esta_associado?
  belongs_to :enderecavel, :polymorphic => true

  def vazio?
    cep.to_s.empty? && uf.to_s.empty? && cidade.to_s.empty? && bairro.to_s.empty? && logradouro.to_s.empty?
  end
  
  def esta_associado?
    begin
      enderecavel_type.find(enderecavel_id)
    rescue Exception => e
      false
    end    
  end
end
